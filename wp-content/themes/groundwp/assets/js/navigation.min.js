"use strict";var KEYMAP={TAB:9};function initNavigation(){initNavToggleSubmenus(),initNavToggleSmall(),submenuAlignment()}function initNavToggleSubmenus(){var e=document.querySelectorAll(".nav--toggle-sub");if(e.length)for(var t=0;t<e.length;t++)initEachNavToggleSubmenu(e[t])}function initEachNavToggleSubmenu(e){var t=e.querySelectorAll(".menu ul");if(t.length){var n=Array.from(e.querySelectorAll(".menu>li")).filter(function(e){return!e.classList.contains("menu-item-has-children")}),o=e.querySelectorAll(".menu>li.menu-item-has-children");n.map(function(e){e.querySelector("a").addEventListener("focus",function(){o.forEach(function(e){toggleSubMenu(e,!1)})})});for(var r=getDropdownButton(),a=0;a<t.length;a++){var l=t[a].parentNode,i=l.querySelector(".dropdown");if(!i){(i=document.createElement("span")).classList.add("dropdown");var u=document.createElement("i");u.classList.add("dropdown-symbol"),i.appendChild(u),t[a].parentNode.insertBefore(i,t[a])}var d=r.cloneNode(!0);d.innerHTML=i.innerHTML,i.parentNode.replaceChild(d,i),d.addEventListener("click",function(e){toggleSubMenu(e.target.parentNode)}),d.addEventListener("focus",function(e){toggleSubMenu(e.target.parentNode)}),l.addEventListener("mouseleave",function(e){toggleSubMenu(e.target,!1)}),l.querySelector("a").addEventListener("focus",function(e){for(var t=e.target.parentNode.parentNode.querySelectorAll("li.menu-item--toggled-on"),n=0;n<t.length;n++)toggleSubMenu(t[n],!1);toggleSubMenu(e.target.parentNode)}),t[a].addEventListener("keydown",function(e){var t="ul.toggle-show > li > a, ul.toggle-show > li > button";KEYMAP.TAB===e.keyCode&&(e.shiftKey?isfirstFocusableElement(e.target,document.activeElement,t)&&toggleSubMenu(e.target.parentNode,!1):islastFocusableElement(e.target,document.activeElement,t)&&toggleSubMenu(e.target.parentNode,!1))}),t[a].parentNode.classList.add("menu-item--has-toggle")}}}function initNavToggleSmall(){var e=document.querySelectorAll(".nav--toggle-small");if(e.length)for(var t=0;t<e.length;t++)initEachNavToggleSmall(e[t])}function submenuAlignment(){var e=document.querySelectorAll(".menu li.menu-item-has-children");if(e.length){var n=document.querySelector("body").offsetWidth;Array.from(e).forEach(function(e){e.addEventListener("mouseenter",function(e){var t=e.target.querySelector("ul.sub-menu");t.getBoundingClientRect().left+t.offsetWidth<=n||t.classList.add("submenu-left")},!1)})}}function initEachNavToggleSmall(n){var t=n.querySelector(".menu-toggle");if(t){t.setAttribute("aria-expanded","false");var o=n.querySelectorAll(".menu>li a"),e=o[0],r=o[o.length-1];window.addEventListener("resize",function(){a(0,!1===l())}),l()&&a(0,!1),t.addEventListener("click",i,!1),e.addEventListener("keydown",function(e){l()&&e.keyCode===KEYMAP.TAB&&e.shiftKey&&i({target:t})}),r.addEventListener("keydown",function(e){l()&&e.keyCode===KEYMAP.TAB&&i({target:t})})}function a(e,n){Array.from(o).map(function(e,t){e.setAttribute("tabIndex",n?"1":"-1"),n&&0===t&&e.focus()})}function l(){return"none"!==getComputedStyle(t).display}function i(e){n.classList.toggle("nav--toggled-on");var t=e.target.getAttribute("aria-expanded");e.target.setAttribute("aria-expanded","false"===t?"true":"false"),a(0,n.classList.contains("nav--toggled-on"))}}function toggleSubMenu(e,t){var n=e.querySelector(".dropdown-toggle"),o=e.querySelector("ul"),r=e.classList.contains("menu-item--toggled-on");if(void 0!==t&&"boolean"==typeof t&&(r=!t),n.setAttribute("aria-expanded",(!r).toString()),r){e.classList.remove("menu-item--toggled-on"),o.classList.remove("toggle-show"),n.setAttribute("aria-label",groundwpScreenReaderText.expand);for(var a=e.querySelectorAll(".menu-item--toggled-on"),l=0;l<a.length;l++)toggleSubMenu(a[l],!1)}else{for(var i=e.parentNode.querySelectorAll("li.menu-item--toggled-on"),u=0;u<i.length;u++)toggleSubMenu(i[u],!1);e.classList.add("menu-item--toggled-on"),o.classList.add("toggle-show"),n.setAttribute("aria-label",groundwpScreenReaderText.collapse)}}function getDropdownButton(){var e=document.createElement("button");return e.classList.add("dropdown-toggle"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label",groundwpScreenReaderText.expand),e.setAttribute("tabIndex","-1"),e}function isfirstFocusableElement(e,t,n){var o=e.querySelectorAll(n);return 0<o.length&&t===o[0]}function islastFocusableElement(e,t,n){var o=e.querySelectorAll(n);return 0<o.length&&t===o[o.length-1]}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initNavigation):initNavigation();